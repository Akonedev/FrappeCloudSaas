# =============================================================================
# FRAPPE LOCAL CLOUD - MAIN COMPOSE FILE
# Podman-native configuration for local SaaS platform
# =============================================================================
# Usage:
#   podman compose up -d                    # Start all services
#   podman compose --profile dns up -d      # Include CoreDNS
#   podman compose down                     # Stop all services
# =============================================================================

name: frappe-cloud

include:
  - path: compose/infra.yaml
  - path: compose/frappe.yaml

# =============================================================================
# SHARED NETWORKS
# =============================================================================
networks:
  # Public network for Traefik routing
  frappe-cloud-proxy:
    name: frappe-cloud-proxy
    driver: bridge
  
  # Internal network for backend services
  frappe-cloud-internal:
    name: frappe-cloud-internal
    driver: bridge
    internal: true

# =============================================================================
# SHARED VOLUMES
# =============================================================================
volumes:
  # Traefik
  frappe-cloud-traefik-certs:
  
  # MinIO
  frappe-cloud-minio-data:
  
  # Registry
  frappe-cloud-registry-data:
  
  # MariaDB
  frappe-cloud-mariadb-data:
  
  # Redis
  frappe-cloud-redis-cache-data:
  frappe-cloud-redis-queue-data:
  
  # Frappe
  frappe-cloud-sites:
  frappe-cloud-logs:
  
  # SaaS Manager
  frappe-cloud-saas-data:
